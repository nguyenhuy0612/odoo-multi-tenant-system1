# Let's Encrypt challenge configuration
# This configuration handles ACME challenges for certificate validation

# ACME challenge location for HTTP-01 validation
location ^~ /.well-known/acme-challenge/ {
    root /var/www/certbot;
    try_files $uri $uri/ =404;
    
    # Allow access without authentication
    allow all;
    
    # Disable caching
    expires -1;
    add_header Cache-Control "no-cache, no-store, must-revalidate";
    
    # Content type for ACME challenges
    location ~ \.txt$ {
        add_header Content-Type text/plain;
    }
}

# Deny access to hidden files except ACME challenges
location ~ /\. {
    deny all;
    access_log off;
    log_not_found off;
}